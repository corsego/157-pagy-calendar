<div class="overflow-auto h-full">
  <%#= turbo_frame_tag :calendar, src: calendar_week_path(date: @last_week_date), loading: :lazy, target: '_top', data: { turbo_action: 'advance' }, class:"hidden" %>
  <%= turbo_frame_tag :calendar, target: '_top' do %>
    <div class="font-bold text-center">
      <%= @date.strftime('%B') %>
    </div>
    <div class="grid grid-cols-7">
      <% month_offset(@date).times do %>
        <div></div>
      <% end %>
      <% @date.all_month.each do |day| %>
        <div class="border hover:bg-rose-200 h-32 bg-rose-300" style="background-size: cover; background-position: center; background-image: url(<%= rails_blob_url(DateAvatar.for_day(day).avatar_attached.first.avatar) if DateAvatar.for_day(day).avatar_attached.first.present? %>);">
          <div class="bg-rose-400 text-center">
          <%= day.strftime('%a, %d %b') %>
          </div>
          <%= link_to "+", new_event_path(day:) %>
          <% @events.where(start_date: day.all_day).each do |event| %>
            <%= render 'events/event', event: %>
          <% end %>
        </div>
      <% end %>
    </div>

    <div class="">
      <%# scroll down to load next week %>
    </div>

    <%= turbo_frame_tag :calendar, src: calendar_month_path(date: @next_month_date), loading: :lazy, target: '_top', data: { turbo_action: 'advance' } %>
  <% end %>
<div>